

<!DOCTYPE html>
<html>
<head>
    <title>Server-side Module: gmod_playx</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
</head>
<body>
<div id="wrapper">
    <div id="navigation">
        

<div id="title">
    <strong>PlayX API Documentation</strong>
</div>

<hr />


    <h2>Client-side</h2>
    
    <ul>
    
            <li>
                <a href="../modules/client.Bookmark.html">Bookmark</a>
            </li>
    
            <li>
                <a href="../modules/client.PlayX.html">PlayX</a>
            </li>
    
            <li>
                <a href="../modules/client.gmod_playx.html">gmod_playx</a>
            </li>
    
            <li>
                <a href="../modules/client.gmod_playx_repeater.html">gmod_playx_repeater</a>
            </li>
    
    </ul>
    
    <h2>Server-side</h2>
    
    <ul>
    
            <li>
                <a href="../modules/server.PlayX.html">PlayX</a>
            </li>
    
            <li>
                <strong><a href="../modules/server.gmod_playx.html">gmod_playx</a></strong>
            </li>
            
            <li>
                <a href="../modules/server.gmod_playx_repeater.html">gmod_playx_repeater</a>
            </li>
    
    </ul>
    
    <h2>Shared</h2>
    
    <ul>
    
            <li>
                <a href="../modules/playxlib.html">playxlib</a>
            </li>
    
    </ul>
    
    <hr />
    
    <h2>Hooks</h2>
    
    <ul>
    
            <li>
                <a href="../modules/hooks.Client.html">Client</a>
            </li>
    
            <li>
                <a href="../modules/hooks.Server.html">Server</a>
            </li>
    
    </ul>

    </div>
    
    <div id="body">
        <ul id="bar">
            <li><a href="../index.html">Index</a></li>
            <li><strong>Module</strong></li>
        </ul>
        
        <h1>Server-side Module <code>gmod_playx</code></h1>

        <p></p>
        
        

        

        
            <h2>Function Summary</h2>
            
            <table class="function-summary" cellpadding="0" cellspacing="0">
                <col width="100">
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#BeginMedia">BeginMedia</a>(handler, uri, start, resumeSupported, lowFramerate, handlerArgs, length)</code>
                            <div class="summary-inset">This directly processes media given as a handler.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#CloseMedia">CloseMedia</a>()</code>
                            <div class="summary-inset">Safe method of ending the media.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#GetProjectedDistance">GetProjectedDistance</a>(pos)</code>
                            <div class="summary-inset">Gets the closet distance between a point and this instance.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#GetProjectionPos">GetProjectionPos</a>()</code>
                            <div class="summary-inset">Gets the projector's screen position, or if it's not a projector, a psuedo projection line endpoint.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#GetSourcePos">GetSourcePos</a>()</code>
                            <div class="summary-inset">Returns the center position of the player, not necessarily where the screen is, in the case of non-projectors.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#GetSubscribers">GetSubscribers</a>()</code>
                            <div class="summary-inset">Gets a list of Player objects.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#IsSubscribed">IsSubscribed</a>(ply)</code>
                            <div class="summary-inset">Returns true if the passed player has subscribed to this instance.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#MediaBegan">MediaBegan</a>(handler, uri, start, resumeSupported, lowFramerate, handlerArgs, length)</code>
                            <div class="summary-inset">Function for overriding.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#MediaBegin">MediaBegin</a>(handler, uri, start, resumeSupported, lowFramerate, handlerArgs, length)</code>
                            <div class="summary-inset">Function for overriding.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#MediaEnd">MediaEnd</a>()</code>
                            <div class="summary-inset">Function for overriding.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#MediaEnded">MediaEnded</a>()</code>
                            <div class="summary-inset">Function for overriding.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#MediaOpen">MediaOpen</a>(provider, uri, start, forceLowFramerate, useJW, result)</code>
                            <div class="summary-inset">Function for overriding.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#MetadataReceive">MetadataReceive</a>(existingMedia, newData)</code>
                            <div class="summary-inset">Overridable function that works the same as the hook.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#OpenMedia">OpenMedia</a>(provider, uri, start, forceLowFramerate, useJW)</code>
                            <div class="summary-inset">Plays something as if you had typed it in the tool panel.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#RaceProtectionTriggered">RaceProtectionTriggered</a>()</code>
                            <div class="summary-inset">Returns true if race protection is still wearing off.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#ShouldAutoSubscribe">ShouldAutoSubscribe</a>(ply)</code>
                            <div class="summary-inset">Returns true if the user should be automatically subscribed to the instance.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#Subscribe">Subscribe</a>(ply)</code>
                            <div class="summary-inset">Add a user to this player's subscription list.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#Unsubscribe">Unsubscribe</a>(ply)</code>
                            <div class="summary-inset">Remove the user from this player's subscription list.</div></td>
                    </tr>
                
                    <tr>
                        <td class="function-prop"><code></code></td>
                        <td><code><a href="#UpdateMetadata">UpdateMetadata</a>(data)</code>
                            <div class="summary-inset">Updates the current media metadata.</div></td>
                    </tr>
                
            </table>
        

        


        
            <h2><a id="functions">Functions</a></h2>
            
            
                

<h3><a id="BeginMedia">BeginMedia</a></h3>

<p><code><strong>gmod_playx:BeginMedia</strong>(handler, uri, start, resumeSupported, lowFramerate, handlerArgs, length)</code></p>

<blockquote class="function-body">
    
        <p>This directly processes media given as a handler. Use OpenMedia() if you want provider detection. Use PlayX.ResolveProvider() if you want to do provider detection manually. Remember that if you want metadata later on, you will have to manually supply this entity with it, as BeginMedia() does not do that (OpenMedia() does, but because it polls the provider framework).</p>
    

    
    <h4>Parameters:</h4>
    <ul>
        
        <li>
          <code><em>handler</em></code>
        </li>
        
        <li>
          <code><em>uri</em></code>
        </li>
        
        <li>
          <code><em>start</em></code>
        </li>
        
        <li>
          <code><em>resumeSupported</em></code>
        </li>
        
        <li>
          <code><em>lowFramerate</em></code>
        </li>
        
        <li>
          <code><em>handlerArgs</em></code> - Arguments for the handler, can be nil
        </li>
        
        <li>
          <code><em>length</em></code> - Length of the media in seconds, can be nil
        </li>
        
    </ul>
    


    

    

    
</blockquote>

<hr />
            
                

<h3><a id="CloseMedia">CloseMedia</a></h3>

<p><code><strong>gmod_playx:CloseMedia</strong>()</code></p>

<blockquote class="function-body">
    
        <p>Safe method of ending the media. This can be called even if nothing is being played at the moment.</p>
    

    


    

    

    
</blockquote>

<hr />
            
                

<h3><a id="GetProjectedDistance">GetProjectedDistance</a></h3>

<p><code><strong>gmod_playx:GetProjectedDistance</strong>(pos)</code></p>

<blockquote class="function-body">
    
        <p>Gets the closet distance between a point and this instance. This returns the distance to the point projected onto the finite line segment between self:GetSourcePos() and self:GetProjectionPos().</p>
    

    
    <h4>Parameters:</h4>
    <ul>
        
        <li>
          <code><em>pos</em></code> - Position
        </li>
        
    </ul>
    


    

    
        <h4>Return value:</h4>
        <ul>
            <li>Distance</li>
        </ul>
    

    
</blockquote>

<hr />
            
                

<h3><a id="GetProjectionPos">GetProjectionPos</a></h3>

<p><code><strong>gmod_playx:GetProjectionPos</strong>()</code></p>

<blockquote class="function-body">
    
        <p>Gets the projector's screen position, or if it's not a projector, a psuedo projection line endpoint. If the entity is not a projector then nil will be returned.</p>
    

    


    

    
        <h4>Return values:</h4>
        <ol>
            
            <li>Position</li>
            
            <li>Normal</li>
            
            <li>Boolean indicating whether a screen is showing</li>
            
        </ol>
    

    
</blockquote>

<hr />
            
                

<h3><a id="GetSourcePos">GetSourcePos</a></h3>

<p><code><strong>gmod_playx:GetSourcePos</strong>()</code></p>

<blockquote class="function-body">
    
        <p>Returns the center position of the player, not necessarily where the screen is, in the case of non-projectors.</p>
    

    


    

    
        <h4>Return values:</h4>
        <ol>
            
            <li>Position</li>
            
            <li>Normal</li>
            
        </ol>
    

    
</blockquote>

<hr />
            
                

<h3><a id="GetSubscribers">GetSubscribers</a></h3>

<p><code><strong>gmod_playx:GetSubscribers</strong>()</code></p>

<blockquote class="function-body">
    
        <p>Gets a list of Player objects.</p>
    

    


    

    
        <h4>Return value:</h4>
        <ul>
            <li>Table of subscribers</li>
        </ul>
    

    
</blockquote>

<hr />
            
                

<h3><a id="IsSubscribed">IsSubscribed</a></h3>

<p><code><strong>gmod_playx:IsSubscribed</strong>(ply)</code></p>

<blockquote class="function-body">
    
        <p>Returns true if the passed player has subscribed to this instance.</p>
    

    
    <h4>Parameters:</h4>
    <ul>
        
        <li>
          <code><em>ply</em></code>
        </li>
        
    </ul>
    


    

    
        <h4>Return value:</h4>
        <ul>
            <li>Boolean</li>
        </ul>
    

    
</blockquote>

<hr />
            
                

<h3><a id="MediaBegan">MediaBegan</a></h3>

<p><code><strong>gmod_playx:MediaBegan</strong>(handler, uri, start, resumeSupported, lowFramerate, handlerArgs, length)</code></p>

<blockquote class="function-body">
    
        <p>Function for overriding. Called after media has begun.</p>
    

    
    <h4>Parameters:</h4>
    <ul>
        
        <li>
          <code><em>handler</em></code>
        </li>
        
        <li>
          <code><em>uri</em></code>
        </li>
        
        <li>
          <code><em>start</em></code>
        </li>
        
        <li>
          <code><em>resumeSupported</em></code>
        </li>
        
        <li>
          <code><em>lowFramerate</em></code>
        </li>
        
        <li>
          <code><em>handlerArgs</em></code> - Arguments for the handler, can be nil
        </li>
        
        <li>
          <code><em>length</em></code> - Length of the media in seconds, can be nil
        </li>
        
    </ul>
    


    

    

    
</blockquote>

<hr />
            
                

<h3><a id="MediaBegin">MediaBegin</a></h3>

<p><code><strong>gmod_playx:MediaBegin</strong>(handler, uri, start, resumeSupported, lowFramerate, handlerArgs, length)</code></p>

<blockquote class="function-body">
    
        <p>Function for overriding. Called after media has begun.</p>
    

    
    <h4>Parameters:</h4>
    <ul>
        
        <li>
          <code><em>handler</em></code>
        </li>
        
        <li>
          <code><em>uri</em></code>
        </li>
        
        <li>
          <code><em>start</em></code>
        </li>
        
        <li>
          <code><em>resumeSupported</em></code>
        </li>
        
        <li>
          <code><em>lowFramerate</em></code>
        </li>
        
        <li>
          <code><em>handlerArgs</em></code> - Arguments for the handler, can be nil
        </li>
        
        <li>
          <code><em>length</em></code> - Length of the media in seconds, can be nil
        </li>
        
    </ul>
    


    

    
        <h4>Return value:</h4>
        <ul>
            <li>False to deny</li>
        </ul>
    

    
</blockquote>

<hr />
            
                

<h3><a id="MediaEnd">MediaEnd</a></h3>

<p><code><strong>gmod_playx:MediaEnd</strong>()</code></p>

<blockquote class="function-body">
    
        <p>Function for overriding. Called like PlayXMediaEnd after PlayXMediaEnd.</p>
    

    


    

    
        <h4>Return value:</h4>
        <ul>
            <li>False to deny</li>
        </ul>
    

    
</blockquote>

<hr />
            
                

<h3><a id="MediaEnded">MediaEnded</a></h3>

<p><code><strong>gmod_playx:MediaEnded</strong>()</code></p>

<blockquote class="function-body">
    
        <p>Function for overriding. Called after media has ended.</p>
    

    


    

    

    
</blockquote>

<hr />
            
                

<h3><a id="MediaOpen">MediaOpen</a></h3>

<p><code><strong>gmod_playx:MediaOpen</strong>(provider, uri, start, forceLowFramerate, useJW, result)</code></p>

<blockquote class="function-body">
    
        <p>Function for overriding. Called like the PlayXMediaOpen hook. Overriding this function will not call the hook unless you call BaseClass.</p>
    

    
    <h4>Parameters:</h4>
    <ul>
        
        <li>
          <code><em>provider</em></code> - Name of provider (detected or provided, but it will exist)
        </li>
        
        <li>
          <code><em>uri</em></code> - URI to play
        </li>
        
        <li>
          <code><em>start</em></code> - Time to start the video at, in seconds
        </li>
        
        <li>
          <code><em>forceLowFramerate</em></code> - Force the client side players to play at 1 FPS
        </li>
        
        <li>
          <code><em>useJW</em></code> - True to allow the use of the JW player, false for otherwise, nil to default true
        </li>
        
        <li>
          <code><em>result</em></code> - Handler information
        </li>
        
    </ul>
    


    

    
        <h4>Return value:</h4>
        <ul>
            <li>False to deny, table to override</li>
        </ul>
    

    
</blockquote>

<hr />
            
                

<h3><a id="MetadataReceive">MetadataReceive</a></h3>

<p><code><strong>gmod_playx:MetadataReceive</strong>(existingMedia, newData)</code></p>

<blockquote class="function-body">
    
        <p>Overridable function that works the same as the hook.</p>
    

    
    <h4>Parameters:</h4>
    <ul>
        
        <li>
          <code><em>existingMedia</em></code> - Also accessible as self.Media
        </li>
        
        <li>
          <code><em>newData</em></code> - Incoming data
        </li>
        
    </ul>
    


    

    
        <h4>Return value:</h4>
        <ul>
            <li>Nil or the new data</li>
        </ul>
    

    
</blockquote>

<hr />
            
                

<h3><a id="OpenMedia">OpenMedia</a></h3>

<p><code><strong>gmod_playx:OpenMedia</strong>(provider, uri, start, forceLowFramerate, useJW)</code></p>

<blockquote class="function-body">
    
        <p>Plays something as if you had typed it in the tool panel. It will attempt to guess the handler frrom the provided provider and URI. If you've already got a handler to play, look into BeginMedia(). You can manually detect providers using the PlayX.ResolveProvider() API function.</p>
    

    
    <h4>Parameters:</h4>
    <ul>
        
        <li>
          <code><em>provider</em></code> - Name of provider, leave blank to auto-detect
        </li>
        
        <li>
          <code><em>uri</em></code> - URI to play
        </li>
        
        <li>
          <code><em>start</em></code> - Time to start the video at, in seconds
        </li>
        
        <li>
          <code><em>forceLowFramerate</em></code> - Force the client side players to play at 1 FPS
        </li>
        
        <li>
          <code><em>useJW</em></code> - True to allow the use of the JW player, false for otherwise, nil to default true
        </li>
        
    </ul>
    


    

    
        <h4>Return values:</h4>
        <ol>
            
            <li>The result generated by a provider or nil</li>
            
            <li>Error message if error</li>
            
        </ol>
    

    
</blockquote>

<hr />
            
                

<h3><a id="RaceProtectionTriggered">RaceProtectionTriggered</a></h3>

<p><code><strong>gmod_playx:RaceProtectionTriggered</strong>()</code></p>

<blockquote class="function-body">
    
        <p>Returns true if race protection is still wearing off. return Boolean</p>
    

    


    

    

    
</blockquote>

<hr />
            
                

<h3><a id="ShouldAutoSubscribe">ShouldAutoSubscribe</a></h3>

<p><code><strong>gmod_playx:ShouldAutoSubscribe</strong>(ply)</code></p>

<blockquote class="function-body">
    
        <p>Returns true if the user should be automatically subscribed to the instance. By default this returns true, but you can override the behavior by defining a hook called PlayXShouldAutoSubscribe or by overriding the function on this entity (or derived entity class). You can manually subscribe and unsubscribe users without having this function matching. This function is only called when a PlayX entity is created and when a player joins but it is never called to "check" subscriptions.</p>
    

    
    <h4>Parameters:</h4>
    <ul>
        
        <li>
          <code><em>ply</em></code>
        </li>
        
    </ul>
    


    

    

    
</blockquote>

<hr />
            
                

<h3><a id="Subscribe">Subscribe</a></h3>

<p><code><strong>gmod_playx:Subscribe</strong>(ply)</code></p>

<blockquote class="function-body">
    
        <p>Add a user to this player's subscription list. The user will start seeing the media if something is already playing. If the player is already subscribed, nothing will happen.</p>
    

    
    <h4>Parameters:</h4>
    <ul>
        
        <li>
          <code><em>ply</em></code>
        </li>
        
    </ul>
    


    

    
        <h4>Return value:</h4>
        <ul>
            <li>False if the player was already subscribed</li>
        </ul>
    

    
</blockquote>

<hr />
            
                

<h3><a id="Unsubscribe">Unsubscribe</a></h3>

<p><code><strong>gmod_playx:Unsubscribe</strong>(ply)</code></p>

<blockquote class="function-body">
    
        <p>Remove the user from this player's subscription list. The media will stop for the player. If the player was not subscribed, then nothing will happen.</p>
    

    
    <h4>Parameters:</h4>
    <ul>
        
        <li>
          <code><em>ply</em></code>
        </li>
        
    </ul>
    


    

    
        <h4>Return value:</h4>
        <ul>
            <li>False if the player was not subscribed to begin with</li>
        </ul>
    

    
</blockquote>

<hr />
            
                

<h3><a id="UpdateMetadata">UpdateMetadata</a></h3>

<p><code><strong>gmod_playx:UpdateMetadata</strong>(data)</code></p>

<blockquote class="function-body">
    
        <p>Updates the current media metadata. Calling this while nothing is playing has no effect. This can be called many times and multiple times.</p>
    

    
    <h4>Parameters:</h4>
    <ul>
        
        <li>
          <code><em>data</em></code> - Metadata structure
        </li>
        
    </ul>
    


    

    

    
</blockquote>

<hr />
            
        


        
        
        <div id="footer">
    &copy; 2009, 2010 <a href="http://www.sk89q.com">sk89q</a>. Generated with <a href="http://luadoc.luaforge.net/">LuaDoc</a>.
</div>
    </div>
</div>
</body>
</html>

